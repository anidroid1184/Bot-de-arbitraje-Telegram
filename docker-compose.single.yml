services:
  selenium-bot:
    build:
      context: .
      dockerfile: Dockerfile.selenium-bot
    container_name: selenium-bot
    shm_size: 2g
    restart: unless-stopped
    ports:
      - "4444:4444"   # Selenium
      - "7900:7900"   # noVNC GUI
    environment:
      - SE_VNC_NO_PASSWORD=1
      - WEBDRIVER_REMOTE_URL=http://localhost:4444/wd/hub
      - PYTHONUNBUFFERED=1
      - PYTHONDONTWRITEBYTECODE=1
    volumes:
      - ./:/app
      - firefox_profile:/home/seluser
    working_dir: /app
    command: ["bash", "-lc", "echo 'selenium-bot ready'; tail -f /dev/null"]

volumes:
  firefox_profile:
    driver: local
